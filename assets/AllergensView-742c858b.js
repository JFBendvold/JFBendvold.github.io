import{r as g,m as U,s as L,a9 as x,u as i,j as N,H as C,o as v,c as h,b as s,e as p,x as c,B as V,A as _,F as B,L as M,p as m,g as E,t as d,d as F,aa as P,W as j,i as D,a0 as G,ab as H}from"./index-2e410ad1.js";const I={class:"allergens"},R={class:"allergens-settings"},T=s("h1",null,"Allergener",-1),W={class:"allergens-settings-container"},$=s("h2",null,"Velg dine allergener:",-1),q={class:"allergens-selection"},z=["value"],J={class:"checkmark"},K={class:"allergens-selected"},O={__name:"AllergensSettings",setup(k){const o=E(),f=["Bløtdyr","Egg","Fisk","Gluten","Lupiner","Melk","Nøtter","Peanøtter","Selleri","Sennep","Sesam","Skalldyr","Soya","Sulfitt"],l=g([]),t=g([]),r=g([!0]);U(async()=>{L();let a=await x(i().getUsername);for(let e=0;e<a.length;e++)a[e]=a[e].name;l.value=a,t.value=a,N()});const y=async()=>{const a=i().getUsername;for(let e=0;e<l.value.length;e++)if(!t.value.includes(l.value[e]))try{let n={username:a,allergyName:l.value[e]};const u=await G(n)}catch{d("Lagring av allergen feilet")}},A=async()=>{const a=i().getUsername;for(let e=0;e<t.value.length;e++)if(!l.value.includes(t.value[e]))try{let n={username:a,allergyName:t.value[e]};const u=await H(n)}catch{d("Noe gikk galt ved fjerning av allergen")}},b=async()=>{await y(),await A(),d("Allergener lagret"),t.value=l.value,await i().setUserAllergens(),r.value=!1,o.push("/profile")};C(l,a=>{a.toString()!==t.value.toString()?r.value=!0:r.value=!1});const w=()=>{r.value||o.push("/profile"),r.value&&confirm("Du har ulagrede endringer. Er du sikker på at du vil forlate siden?")&&(r.value=!1,o.push("/profile"))};return(a,e)=>(v(),h("div",I,[s("button",{class:"back-button",onClick:w},[p(c(_),{icon:c(V)},null,8,["icon"])]),s("div",R,[T,s("div",W,[$,s("div",q,[(v(),h(B,null,M(f,(n,u)=>s("div",{class:"allergen-container",key:u},[s("label",null,[F(s("input",{type:"checkbox",value:n,"onUpdate:modelValue":e[0]||(e[0]=S=>l.value=S)},null,8,z),[[P,l.value]]),s("span",J,[p(c(_),{icon:c(j)},null,8,["icon"])]),D(" "+m(n),1)])])),64))])]),s("div",K,[s("div",null,"Allergener valgt: "+m(l.value.join(", ")),1)]),s("div",{class:"save-button-container"},[s("button",{class:"save-button",onClick:b},"Lagre endringer")])])]))}},X={__name:"AllergensView",setup(k){return(o,f)=>(v(),h("main",null,[p(O)]))}};export{X as default};
