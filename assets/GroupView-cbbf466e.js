import{r,a as x,m as R,s as v,u as g,a3 as U,j as m,o as s,c as a,e as f,f as V,b as o,z as i,y as $,F as w,L as G,p as c,g as T,t as y,h as F,x as d,A as P,B as z,C as j,d as K,a4 as O,a5 as q,a6 as H}from"./index-2e410ad1.js";import{_ as J}from"./SetupGroup-f99366f6.js";const Q={class:"group-settings-container"},W=o("div",{class:"group-settings-title"},[o("h1",null,"Grupper")],-1),X={class:"group-settings-actions"},Y={key:0,class:"group-settings-selector"},Z=["onClick"],ee={class:"group-button-name"},oe={key:1,class:"group-overview"},te={class:"group-overview-title"},se={class:"group-overview-code"},ne=o("h2",null,"Gruppekode:",-1),ae={class:"group-overview-members"},re={key:0,class:"member-role-edit"},ue=["onUpdate:modelValue","onChange"],le=o("option",{value:"ADMIN"},"Administrator",-1),ie=o("option",{value:"MEMBER"},"Medlem",-1),ce=o("option",{value:"RESTRICTED"},"Begrenset",-1),de=[le,ie,ce],pe={key:1,class:"member-role"},he={key:0},_e={key:1},ve={key:2},ge={__name:"GroupSettings",setup(M){const k=T(),p=r([]),u=r(null),C=r(""),N=x().getGroupID,l=r(!1),I=r([]),h=r(""),A=r(!1);R(async()=>{v(),g().getUsername;const e=await U();console.log(e);for(let n=0;n<e.length;n++)p.value.push(e[n]);m()});function B(e){C.value=e.groupName,console.log(e.groupId),u.value=e.groupId,D()}async function D(){v();const e=await q(u.value);console.log(e.data),h.value=e.data.linkCode;for(let n=0;n<e.data.userAuthorityInfoList.length;n++)e.data.userAuthorityInfoList[n].authority==="ADMIN"&&e.data.userAuthorityInfoList[n].username===g().getUsername&&(A.value=!0,console.log("Admin")),I.value.push(e.data.userAuthorityInfoList[n]);m()}function S(){const e=document.createElement("textarea");e.value=h.value,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),y("Gruppekode kopiert til utklippstavle")}async function b(e){v();try{await H(u.value,e.username,e.authority),y("Brukerens rolle er oppdatert")}catch(n){y("Kunne ikke oppdatere brukerens rolle"),console.log(n)}console.log(e.authority),m()}function E(){k.push("/")}return(e,n)=>{const L=F("router-link");return s(),a("div",Q,[f(L,{to:"/profile",class:"back-button"},{default:V(()=>[f(d(P),{icon:d(z)},null,8,["icon"])]),_:1}),W,o("div",X,[u.value===null&&!l.value?(s(),a("button",{key:0,class:"group-settings-button",onClick:n[0]||(n[0]=t=>l.value=!l.value)}," Opprett/bli med i en gruppe ")):i("",!0),l.value?(s(),$(J,{key:1,onNextStep:E})):i("",!0)]),u.value===null&&!l.value?(s(),a("div",Y,[(s(!0),a(w,null,G(p.value,t=>(s(),a("div",{class:j(["group-button",{active:t.group.groupId===d(N)}]),key:t.group.groupId,onClick:_=>B(t.group)},[o("div",ee,[o("h2",null,c(t.group.groupName),1)])],10,Z))),128))])):i("",!0),u.value!==null&&!l.value?(s(),a("div",oe,[o("div",te,[o("h1",null,c(C.value),1)]),o("div",se,[ne,o("h2",{class:"group-code",onClick:S},c(h.value),1)]),o("div",ae,[(s(!0),a(w,null,G(I.value,t=>(s(),a("div",{class:"member",key:t.username},[o("h2",null,c(t.username),1),A.value&&t.username!==d(g)().getUsername&&t.authority!=="ADMIN"?(s(),a("div",re,[K(o("select",{"onUpdate:modelValue":_=>t.authority=_,onChange:_=>b(t)},de,40,ue),[[O,t.authority]])])):(s(),a("div",pe,[t.authority==="ADMIN"?(s(),a("h3",he,"Administrator")):t.authority==="RESTRICTED"?(s(),a("h3",_e,"Begrenset")):(s(),a("h3",ve,"Medlem"))]))]))),128))])])):i("",!0)])}}},fe={__name:"GroupView",setup(M){return(k,p)=>(s(),a("main",null,[f(ge)]))}};export{fe as default};
