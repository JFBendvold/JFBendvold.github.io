(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{93040:function(e,t,n){"use strict";n.d(t,{Z:function(){return LoadingScreen}});var r=n(85893),a=n(99205),i=n.n(a);function LoadingScreen(){return(0,r.jsx)("div",{className:i().loaderContainer,id:"loading-screen",style:{display:"none"},children:(0,r.jsx)("div",{className:i().loader})})}},92894:function(e,t,n){"use strict";n.d(t,{Z:function(){return Header}});var r=n(85893),a=n(9057),i=n.n(a),s=n(41664),u=n.n(s),o=n(25675),c=n.n(o),l=n(67294),p=n(11163),y=n(18191),d=n(59498);function Header(){let[e,t]=(0,l.useState)(0),[n,a]=(0,l.useState)({}),s=(0,p.useRouter)();async function getTokensFromBlockchain(){let e=await (0,y.lz)();if(-1===e){console.error("Error getting tokens from blockchain");return}t(e),n.tokens=e,a(n),localStorage.setItem("user",JSON.stringify(n))}return(0,l.useEffect)(()=>{(async function(){let e=localStorage.getItem("user");e?(a(JSON.parse(e)),t(JSON.parse(e).tokens)):(console.error("No user found in local storage"),s.push("/login"))})()},[]),(0,l.useEffect)(()=>{n.name&&""!==n.name&&getTokensFromBlockchain()},[n.name]),(0,r.jsx)("header",{className:i().header,children:(0,r.jsxs)("div",{className:i().inner,children:[(0,r.jsxs)(u(),{className:i().logo,href:"/dashboard",children:[(0,r.jsx)("h1",{children:"T"}),(0,r.jsx)("h1",{children:"O"}),(0,r.jsx)("h1",{children:"K"}),(0,r.jsx)("h1",{children:"E"}),(0,r.jsx)("h1",{children:"N"}),(0,r.jsx)("h1",{children:"T"}),(0,r.jsx)("h1",{children:"R"}),(0,r.jsx)("h1",{children:"I"}),(0,r.jsx)("h1",{children:"V"}),(0,r.jsx)("h1",{children:"I"}),(0,r.jsx)("h1",{children:"A"})]}),(0,r.jsxs)("div",{className:i().content,children:[(0,r.jsxs)(u(),{className:i().wallet,href:"/settings?page=2",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("p",{children:"Tokens"})]}),(0,r.jsxs)("div",{href:"/profile",className:i().profile,children:[(0,r.jsx)(c(),{src:"".concat(d.h,"/users/image/").concat(n.name),alt:"Profile",width:36,height:36}),(0,r.jsxs)("div",{className:i().dropdown,children:[(0,r.jsx)(u(),{href:"/settings?page=0",children:(0,r.jsx)("span",{className:"material-symbols-outlined",children:"person"})}),(0,r.jsx)(u(),{href:"/settings?page=1",children:(0,r.jsx)("span",{className:"material-symbols-outlined",children:"settings"})}),(0,r.jsx)(u(),{href:"/settings?page=2",children:(0,r.jsx)("span",{className:"material-symbols-outlined",children:"sync_alt"})}),(0,r.jsx)(u(),{href:"/logout",children:(0,r.jsx)("span",{className:"material-symbols-outlined",children:"logout"})})]})]})]})]})})}},21035:function(e,t,n){"use strict";n.d(t,{C:function(){return metamaskOneTimeLogin},H:function(){return fetchAddress}});var r=n(59498);let a=(0,r.U)("/metamask");async function metamaskOneTimeLogin(e,t,n,r){try{let i=await a.post("/auth",{signature:e,fingerprint:t,timestamp:n,username:r});return i}catch(e){return e}}async function fetchAddress(){try{let e=await a.get("/address");return e.data}catch(e){return e}}},36093:function(e,t,n){"use strict";n.d(t,{Gt:function(){return getLobbyUsers},Ml:function(){return changeCountry},Nk:function(){return updateProfilePicture},Uz:function(){return updateStyle},a$:function(){return registerUser},cO:function(){return getActiveUsers},gQ:function(){return updatePassword},n5:function(){return getUserId},pz:function(){return searchUsers}});var r=n(59498),a=n(21035);let i=(0,r.U)("/users");async function registerUser(e){try{let t=await i.post("/add",e);return t}catch(e){return e.response}}async function updateStyle(e){try{let t=await i.put("/style",{style:e});return t}catch(e){return e.response}}async function getUserId(){try{let e=await i.get("/userId");if(200!==e.status){let e=await (0,a.H)();return e}return e}catch(e){try{let e=await (0,a.H)();return e}catch(e){return e}}}async function updateProfilePicture(){try{let e=await i.put("/changeAvatar");return e}catch(e){return e.response}}async function updatePassword(e,t){try{let n=await i.put("/changePassword",{old:e,updated:t});return n}catch(e){return console.error("Error updating password:",e),e.response}}async function getLobbyUsers(e){try{let t=[];for(let n of e){let e=await i.get("/id/"+n);t.push(e.data)}if(0===t.length)throw console.error("Error fetching lobby users: no users found"),Error("No users found");if(t.length!==e.length)throw console.error("Error fetching lobby users: not all users found"),Error("Not all users found");return t}catch(e){return console.error("Error fetching lobby users:",e),e.response}}async function searchUsers(e){try{let t=await i.get("/getUsers/"+e);return t}catch(e){return e.response}}async function changeCountry(e){try{let t=await i.put("/changeCountry",{country:e});return t}catch(e){return e.response}}async function getActiveUsers(){try{let e=await i.get("/activeUsers");return e}catch(e){return e.response}}},69143:function(e,t,n){"use strict";n.d(t,{C:function(){return showLoadingScreen},n:function(){return hideLoadingScreen}}),n(67294),n(93040);let showLoadingScreen=()=>{let e=document.getElementById("loading-screen");e&&(e.style.display="flex")},hideLoadingScreen=()=>{let e=document.getElementById("loading-screen");e&&(e.style.display="none")}},52200:function(e,t,n){"use strict";n.d(t,{El:function(){return openNotificationInfo},H3:function(){return openNotificationError},kl:function(){return openNotificationSuccess}});var r=n(16318);let openNotificationError=(e,t)=>{r.ZP.error({message:e,description:t,duration:2})},openNotificationSuccess=(e,t)=>{r.ZP.success({message:e,description:t,duration:2})},openNotificationInfo=(e,t)=>{r.ZP.info({message:e,description:t,duration:2})}},18191:function(e,t,n){"use strict";n.d(t,{N1:function(){return getAverageQuestionOfUser},f1:function(){return getTransactions},lz:function(){return getTokens}});var r=n(52209),a=n(36093),i=n(74686);let s="https://eth-sepolia.g.alchemy.com/v2/IA22Anj6b1Wd0KS5Lji_wZf4MwP3IQPP",u="0x221772ff3DB4396820f9D9700F5aAE35DD3FA80f";async function getTokens(){try{let e=new r.ZPm(new r.ZPm.providers.HttpProvider(s)),t=new e.eth.Contract(i,u),n=await (0,a.n5)();console.log("UserId:",n),console.log(n.data);let o=await t.methods.getTokens(n.data).call();console.log("TokensRaw:",o);let c=Number(o);return console.log("Tokens:",c),c}catch(e){return console.log(e),-1}}async function getTransactions(){try{let e=new r.ZPm(new r.ZPm.providers.HttpProvider(s)),t=new e.eth.Contract(i,u),n=await (0,a.n5)(),o=await t.methods.getTransactions(n.data).call();return o}catch(e){return console.log(e),-1}}async function getAverageQuestionOfUser(){try{let e=new r.ZPm(new r.ZPm.providers.HttpProvider(s)),t=new e.eth.Contract(i,u),n=await (0,a.n5)(),o=await t.methods.getAverageQuestionOfUser(n.data).call();return o}catch(e){return console.log(e),-1}}},9057:function(e){e.exports={header:"header_header__rY90F",inner:"header_inner___XluN",logo:"header_logo__XtPtX",content:"header_content__v4Ap4",profile:"header_profile__f2DRM",dropdown:"header_dropdown__VYYBF",wallet:"header_wallet__SC9Rm"}},99205:function(e){e.exports={loaderContainer:"loadingScreen_loaderContainer__h4VEZ",loader:"loadingScreen_loader__fKF4R",spin:"loadingScreen_spin__iKqDv"}},46601:function(){},74686:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_minDeposit","type":"uint256"},{"internalType":"uint256","name":"_minDraw","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"user","type":"string"},{"internalType":"uint256","name":"balance","type":"uint256"}],"name":"addBalanceToUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"uint256","name":"_buyIn","type":"uint256"},{"internalType":"uint256","name":"_timeStamp","type":"uint256"},{"internalType":"uint16","name":"_players","type":"uint16"}],"name":"addGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"addParticipantToGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"dealMoneyToWinners","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getAllTokens","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"getAverageQuestionOfGame","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"userId","type":"string"}],"name":"getAverageQuestionOfUser","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"getGame","outputs":[{"internalType":"contract GameContract","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMinDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMinDraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getScoreTable","outputs":[{"components":[{"internalType":"string","name":"userName","type":"string"},{"internalType":"uint256","name":"score","type":"uint256"}],"internalType":"struct Storage.UserScore[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"getTokens","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"userId","type":"string"}],"name":"getTransactions","outputs":[{"components":[{"internalType":"string","name":"transactionType","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"timeStamp","type":"uint256"}],"internalType":"struct TransactionStruct.Transaction[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_userId","type":"string"}],"name":"getUserGames","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"isUserInGame","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"kickParticipant","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"register","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"updateQuestionCounter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"},{"internalType":"uint256","name":"drawAmount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"}]')}}]);