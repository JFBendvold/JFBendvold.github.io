(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{34607:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"}},54434:function(e,t,n){"use strict";Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return o}});var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var o=a?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(r,c,o):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}(n(67294)),a=_interop_require_default(n(34607)),c=_interop_require_default(n(92074));function _interop_require_default(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}var o=r.forwardRef(function(e,t){var n,o;return r.createElement(c.default,(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),o=o={ref:t,icon:a.default},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n))})},3956:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/feedbacks",function(){return n(88242)}])},88242:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Feedbacks}});var r=n(85893),a=n(67294),c=n(26602),o=n.n(c),s=n(92894),l=n(52200),d=n(11163),i=n(1280),u=n(69143),f=n(93040),b=n(35297),_=n(54434);function Feedbacks(){let[e,t]=(0,a.useState)({}),[n,c]=(0,a.useState)("#FF70A6"),[k,p]=(0,a.useState)(""),[g,y]=(0,a.useState)([]),[h,m]=(0,a.useState)(0),[j,O]=(0,a.useState)(1);(0,d.useRouter)();let v=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{let e=localStorage.getItem("user");e?t(JSON.parse(e)):console.error("No user found in local storage"),(0,u.C)(),(0,i.f7)().then(e=>{200===e.status?(console.log(e.data),y(e.data.feedbacks),m(e.data.count)):((0,l.H3)("Error getting feedbacks","Please try again later"),console.error("Error getting feedbacks")),(0,u.n)()})},[]),(0,a.useEffect)(()=>{e&&e.style&&(c(e.style),document.body.style.background="".concat(e.style))},[e]),(0,r.jsxs)("main",{className:o().main,ref:v,children:[(0,r.jsx)(s.Z,{}),(0,r.jsxs)("div",{className:o().content,children:[(0,r.jsx)("h1",{className:o().title,children:"Review feedbacks"}),(0,r.jsx)("div",{className:o().feedbackContainer,children:g.map(e=>(0,r.jsxs)("div",{className:o().feedback,children:[(0,r.jsxs)("div",{className:o().feedbackHeader,children:[(0,r.jsx)("h2",{className:o().feedbackTitle,children:e.title}),(0,r.jsx)("p",{className:o().feedbackDate,children:function(e){let t=new Date(e),n=t.getDate(),r=t.getMonth()+1,a=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(a)}(e.timestamp)})]}),(0,r.jsx)("p",{className:o().feedbackContent,children:e.comment}),(0,r.jsxs)("div",{className:o().feedbackFooter,children:[(0,r.jsxs)("p",{className:o().feedbackId,children:["ID: ",e._id]}),(0,r.jsx)(b.Z,{title:"Are you sure you want to delete this feedback?",icon:(0,r.jsx)(_.Z,{style:{color:"red"}}),onConfirm:()=>{var t;return t=e._id,void((0,u.C)(),(0,i.qq)(t).then(e=>{200===e.status?((0,l.kl)("Feedback deleted successfully"),y(g.filter(e=>e._id!==t)),m(h-1)):((0,l.H3)("Error deleting feedback","Please try again later"),console.error("Error deleting feedback")),(0,u.n)()}))},okText:"Yes",cancelText:"No",okButtonProps:{style:{backgroundColor:"#FF70A6",color:"#FFFFFF"}},children:(0,r.jsx)("button",{className:o().deleteButton,children:"Delete"})})]})]},e._id))}),g.length<h&&(0,r.jsx)("button",{className:o().nextButton,onClick:function(){console.log("Getting next page"),(0,u.C)(),(0,i.f7)(j+1).then(e=>{200===e.status?(y([...g,...e.data.feedbacks]),O(j+1)):((0,l.H3)("Error getting feedbacks","Please try again later"),console.error("Error getting feedbacks")),(0,u.n)()})},children:"Load more"})]}),(0,r.jsx)(f.Z,{})]})}},1280:function(e,t,n){"use strict";n.d(t,{f7:function(){return getAllFeedbacks},fA:function(){return sendFeedback},qq:function(){return deleteFeedback}});var r=n(59498);let a=(0,r.U)("/feedback");async function sendFeedback(e,t){try{let n=await a.post("/add",{title:e,comment:t});return n}catch(e){return e.response}}async function getAllFeedbacks(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{let n=await a.get("/all?pageNumber=".concat(e,"&itemsPerPage=").concat(t));return n}catch(e){return e.response}}async function deleteFeedback(e){try{let t=await a.delete("/delete/".concat(e));return t}catch(e){return e.response}}},26602:function(e){e.exports={main:"feedbacks_main__lPIr1",content:"feedbacks_content__YbGBM",slidein:"feedbacks_slidein__6k_IT",title:"feedbacks_title__6hDNe",feedbackContainer:"feedbacks_feedbackContainer__ClPsU",feedback:"feedbacks_feedback__v3JNZ",feedbackHeader:"feedbacks_feedbackHeader__PNFLN",feedbackContent:"feedbacks_feedbackContent__jF9oT",feedbackFooter:"feedbacks_feedbackFooter__iP6_Y",feedbackId:"feedbacks_feedbackId___vL5l",deleteButton:"feedbacks_deleteButton__h5sup",nextButton:"feedbacks_nextButton__kWomv"}}},function(e){e.O(0,[664,209,675,318,227,297,260,774,888,179],function(){return e(e.s=3956)}),_N_E=e.O()}]);