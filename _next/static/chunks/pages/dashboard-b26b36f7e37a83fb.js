(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return n(58626)}])},92894:function(e,t,n){"use strict";n.d(t,{Z:function(){return Header}});var a=n(85893),s=n(9057),r=n.n(s),i=n(41664),o=n.n(i),u=n(25675),l=n.n(u),c=n(67294),p=n(11163),d=n(18191),y=n(59498);function Header(){let[e,t]=(0,c.useState)(0),[n,s]=(0,c.useState)({}),i=(0,p.useRouter)();async function getTokensFromBlockchain(){let e=await (0,d.lz)();if(-1===e){console.error("Error getting tokens from blockchain");return}t(e),n.tokens=e,s(n),localStorage.setItem("user",JSON.stringify(n))}return(0,c.useEffect)(()=>{(async function(){let e=localStorage.getItem("user");e?(s(JSON.parse(e)),t(JSON.parse(e).tokens)):(console.error("No user found in local storage"),i.push("/login"))})()},[]),(0,c.useEffect)(()=>{n.name&&""!==n.name&&getTokensFromBlockchain()},[n.name]),(0,a.jsx)("header",{className:r().header,children:(0,a.jsxs)("div",{className:r().inner,children:[(0,a.jsxs)(o(),{className:r().logo,href:"/dashboard",children:[(0,a.jsx)("h1",{children:"T"}),(0,a.jsx)("h1",{children:"O"}),(0,a.jsx)("h1",{children:"K"}),(0,a.jsx)("h1",{children:"E"}),(0,a.jsx)("h1",{children:"N"}),(0,a.jsx)("h1",{children:"T"}),(0,a.jsx)("h1",{children:"R"}),(0,a.jsx)("h1",{children:"I"}),(0,a.jsx)("h1",{children:"V"}),(0,a.jsx)("h1",{children:"I"}),(0,a.jsx)("h1",{children:"A"})]}),(0,a.jsxs)("div",{className:r().content,children:[(0,a.jsxs)(o(),{className:r().wallet,href:"/settings?page=2",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("p",{children:"Tokens"})]}),(0,a.jsxs)("div",{href:"/profile",className:r().profile,children:[(0,a.jsx)(l(),{src:"".concat(y.h,"/users/image/").concat(n.name),alt:"Profile",width:36,height:36}),(0,a.jsxs)("div",{className:r().dropdown,children:[(0,a.jsx)(o(),{href:"/settings?page=0",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"person"})}),(0,a.jsx)(o(),{href:"/settings?page=1",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"settings"})}),(0,a.jsx)(o(),{href:"/settings?page=2",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"sync_alt"})}),(0,a.jsx)(o(),{href:"/logout",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"logout"})})]})]})]})]})})}},58626:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Dashboard}});var a=n(85893),s=n(67294),r=n(86468),i=n.n(r),o=n(92894),u=n(41664),l=n.n(u),c=n(62568),p=n.n(c),d=n(25675),y=n.n(d);function Footer(){return(0,a.jsx)("footer",{className:p().footer,children:(0,a.jsxs)("div",{className:p().inner,children:[(0,a.jsxs)("div",{className:p().column,children:[(0,a.jsxs)("h1",{className:p().title,children:["TOKENTRIVIA ",(0,a.jsx)("span",{className:p().version,children:"v1.0.0"})]}),(0,a.jsx)("p",{className:p().text,children:"WEB3 Trivia Game"})]}),(0,a.jsxs)("div",{className:p().column,children:[(0,a.jsx)("h1",{className:p().title,children:"Links"}),(0,a.jsx)(l(),{href:"/dashboard",children:(0,a.jsx)("p",{className:p().text,children:"Dashboard"})}),(0,a.jsx)(l(),{href:"/tutorial",children:(0,a.jsx)("p",{className:p().text,children:"Tutorial"})}),(0,a.jsx)(l(),{href:"/leaderboard",children:(0,a.jsx)("p",{className:p().text,children:"Leaderboard"})})]}),(0,a.jsxs)("div",{className:p().column,children:[(0,a.jsx)("h1",{className:p().title,children:"Socials"}),(0,a.jsxs)("div",{className:p().socials,children:[(0,a.jsx)(l(),{href:"https://www.instagram.com/tokent.io/",children:(0,a.jsx)(y(),{src:"/img/socials/instagram.svg",width:30,height:30,alt:"Instagram",className:p().black})}),(0,a.jsx)(l(),{href:"https://www.facebook.com/tokent.io",children:(0,a.jsx)(y(),{src:"/img/socials/facebook.png",width:30,height:30,alt:"Facebook"})}),(0,a.jsx)(l(),{href:"https://twitter.com/tokent_io",children:(0,a.jsx)(y(),{src:"/img/socials/twitter.svg",width:30,height:30,alt:"Twitter",className:p().black})})]})]})]})})}var m=n(11163),h=n(36093);function Dashboard(){let e=(0,s.useRef)(null),t=(0,s.useRef)(null),[n,r]=(0,s.useState)({}),[u,c]=(0,s.useState)("#FF70A6"),p=(0,m.useRouter)(),[d,y]=(0,s.useState)("...");return(0,s.useLayoutEffect)(()=>{t.current.style.opacity=1,e.current.style.backgroundColor="".concat(u),document.body.style.background="".concat(u);let n=localStorage.getItem("user");n?r(JSON.parse(n)):console.error("No user found in local storage"),(0,h.cO)().then(e=>{(null==e?void 0:e.status)===200&&y(e.data)})},[]),(0,s.useEffect)(()=>(n&&n.style&&(c(n.style),e.current.style.background="".concat(n.style)),()=>{document.body.style.background="".concat(u)}),[n]),(0,a.jsxs)("main",{className:i().main,ref:e,children:[(0,a.jsx)(o.Z,{}),(0,a.jsxs)("div",{className:i().content,ref:t,children:[(0,a.jsx)("div",{className:i().section,children:(0,a.jsxs)("div",{className:i().joinGameContainer,children:[(0,a.jsx)("div",{className:i().topLeft,children:(0,a.jsxs)("p",{className:i().topLeftText,children:["Active players: ",d]})}),(0,a.jsx)("h1",{className:i().title,children:"Join a game"}),(0,a.jsx)("button",{className:i().button,onClick:function(){t.current.style.transform="translateX(-200vw)",t.current.style.transition="transform 0.5s ease-in-out",setTimeout(()=>{p.push("/game")},500)},children:"Find a game"})]})}),(0,a.jsxs)("div",{className:i().section,children:[(0,a.jsxs)("div",{className:i().smallContainer,style:{backgroundImage:"url('/img/bg3.jpg')"},children:[(0,a.jsx)("h1",{className:i().title,children:"Learn how to play"}),(0,a.jsx)("button",{className:i().button,onClick:function(){t.current.style.transform="translateY(-200vw)",t.current.style.opacity=0,t.current.style.transition="all 0.5s ease-in-out",setTimeout(()=>{p.push("/tutorial")},500)},children:"Tutorial"})]}),(0,a.jsxs)("div",{className:i().smallContainer,style:{backgroundImage:"url('/img/bg4.jpg')"},children:[(0,a.jsx)("h1",{className:i().title,children:"View your ranking"}),(0,a.jsx)(l(),{className:i().button,href:"/leaderboard",children:"Leaderboard"})]})]}),(0,a.jsx)("div",{className:i().section,children:(0,a.jsxs)("div",{className:i().feedbackContainer,children:[(0,a.jsx)("h1",{className:i().title,children:"Give us feedback"}),(0,a.jsx)("button",{className:i().button,onClick:function(){t.current.style.transform="translateY(-200vw)",t.current.style.opacity=0,t.current.style.transition="all 0.5s ease-in-out",setTimeout(()=>{p.push("/feedback")},500)},children:"Feedback"})]})}),(0,a.jsx)(Footer,{})]})]})}},21035:function(e,t,n){"use strict";n.d(t,{C:function(){return metamaskOneTimeLogin},H:function(){return fetchAddress}});var a=n(59498);let s=(0,a.U)("/metamask");async function metamaskOneTimeLogin(e,t,n,a){try{let r=await s.post("/auth",{signature:e,fingerprint:t,timestamp:n,username:a});return r}catch(e){return e}}async function fetchAddress(){try{let e=await s.get("/address");return e.data}catch(e){return e}}},36093:function(e,t,n){"use strict";n.d(t,{Gt:function(){return getLobbyUsers},Ml:function(){return changeCountry},Nk:function(){return updateProfilePicture},Uz:function(){return updateStyle},a$:function(){return registerUser},cO:function(){return getActiveUsers},gQ:function(){return updatePassword},n5:function(){return getUserId},pz:function(){return searchUsers}});var a=n(59498),s=n(21035);let r=(0,a.U)("/users");async function registerUser(e){try{let t=await r.post("/add",e);return t}catch(e){return e.response}}async function updateStyle(e){try{let t=await r.put("/style",{style:e});return t}catch(e){return e.response}}async function getUserId(){try{let e=await r.get("/userId");if(200!==e.status){let e=await (0,s.H)();return e}return e}catch(e){try{let e=await (0,s.H)();return e}catch(e){return e}}}async function updateProfilePicture(){try{let e=await r.put("/changeAvatar");return e}catch(e){return e.response}}async function updatePassword(e,t){try{let n=await r.put("/changePassword",{old:e,updated:t});return n}catch(e){return console.error("Error updating password:",e),e.response}}async function getLobbyUsers(e){try{let t=[];for(let n of e){let e=await r.get("/id/"+n);t.push(e.data)}if(0===t.length)throw console.error("Error fetching lobby users: no users found"),Error("No users found");if(t.length!==e.length)throw console.error("Error fetching lobby users: not all users found"),Error("Not all users found");return t}catch(e){return console.error("Error fetching lobby users:",e),e.response}}async function searchUsers(e){try{let t=await r.get("/getUsers/"+e);return t}catch(e){return e.response}}async function changeCountry(e){try{let t=await r.put("/changeCountry",{country:e});return t}catch(e){return e.response}}async function getActiveUsers(){try{let e=await r.get("/activeUsers");return e}catch(e){return e.response}}},18191:function(e,t,n){"use strict";n.d(t,{N1:function(){return getAverageQuestionOfUser},f1:function(){return getTransactions},lz:function(){return getTokens}});var a=n(52209),s=n(36093),r=n(74686);let i="https://eth-sepolia.g.alchemy.com/v2/IA22Anj6b1Wd0KS5Lji_wZf4MwP3IQPP",o="0x221772ff3DB4396820f9D9700F5aAE35DD3FA80f";async function getTokens(){try{let e=new a.ZPm(new a.ZPm.providers.HttpProvider(i)),t=new e.eth.Contract(r,o),n=await (0,s.n5)();console.log("UserId:",n),console.log(n.data);let u=await t.methods.getTokens(n.data).call();console.log("TokensRaw:",u);let l=Number(u);return console.log("Tokens:",l),l}catch(e){return console.log(e),-1}}async function getTransactions(){try{let e=new a.ZPm(new a.ZPm.providers.HttpProvider(i)),t=new e.eth.Contract(r,o),n=await (0,s.n5)(),u=await t.methods.getTransactions(n.data).call();return u}catch(e){return console.log(e),-1}}async function getAverageQuestionOfUser(){try{let e=new a.ZPm(new a.ZPm.providers.HttpProvider(i)),t=new e.eth.Contract(r,o),n=await (0,s.n5)(),u=await t.methods.getAverageQuestionOfUser(n.data).call();return u}catch(e){return console.log(e),-1}}},86468:function(e){e.exports={main:"dashboard_main__ne9_a",content:"dashboard_content__WXav7",section:"dashboard_section__8taBe",joinGameContainer:"dashboard_joinGameContainer__Mn_io",title:"dashboard_title__RwjZR",button:"dashboard_button__9Ra7Z",topLeft:"dashboard_topLeft__SgXHo",topLeftText:"dashboard_topLeftText__uqk0X",blink:"dashboard_blink__KULWA",smallContainer:"dashboard_smallContainer__YHUoY",feedbackContainer:"dashboard_feedbackContainer__dMIe6"}},62568:function(e){e.exports={footer:"footer_footer__3bHEW",inner:"footer_inner__fnM6Z",column:"footer_column__Etund",title:"footer_title__3Qntd",text:"footer_text__oPwqd",version:"footer_version__AjSkP",socials:"footer_socials__vIXjA",black:"footer_black__DsXGh"}},9057:function(e){e.exports={header:"header_header__rY90F",inner:"header_inner___XluN",logo:"header_logo__XtPtX",content:"header_content__v4Ap4",profile:"header_profile__f2DRM",dropdown:"header_dropdown__VYYBF",wallet:"header_wallet__SC9Rm"}},46601:function(){},74686:function(e){"use strict";e.exports=JSON.parse('[{"inputs":[{"internalType":"uint256","name":"_minDeposit","type":"uint256"},{"internalType":"uint256","name":"_minDraw","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"user","type":"string"},{"internalType":"uint256","name":"balance","type":"uint256"}],"name":"addBalanceToUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"uint256","name":"_buyIn","type":"uint256"},{"internalType":"uint256","name":"_timeStamp","type":"uint256"},{"internalType":"uint16","name":"_players","type":"uint16"}],"name":"addGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"addParticipantToGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"dealMoneyToWinners","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"deposit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"getAllTokens","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"getAverageQuestionOfGame","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"userId","type":"string"}],"name":"getAverageQuestionOfUser","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"getGame","outputs":[{"internalType":"contract GameContract","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMinDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMinDraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getScoreTable","outputs":[{"components":[{"internalType":"string","name":"userName","type":"string"},{"internalType":"uint256","name":"score","type":"uint256"}],"internalType":"struct Storage.UserScore[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"getTokens","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"userId","type":"string"}],"name":"getTransactions","outputs":[{"components":[{"internalType":"string","name":"transactionType","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"timeStamp","type":"uint256"}],"internalType":"struct TransactionStruct.Transaction[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_userId","type":"string"}],"name":"getUserGames","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"isUserInGame","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"},{"internalType":"string","name":"userId","type":"string"}],"name":"kickParticipant","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"}],"name":"register","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_gameId","type":"uint256"}],"name":"updateQuestionCounter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"user","type":"string"},{"internalType":"uint256","name":"drawAmount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"payable","type":"function"}]')}},function(e){e.O(0,[664,209,675,774,888,179],function(){return e(e.s=51075)}),_N_E=e.O()}]);